# 工作记录功能说明

## 🎯 功能概述

工作记录功能允许你保存完整的Excel数据转换配置，包括：
- 原始Excel文件数据
- 字段映射配置
- 目标数据库表信息
- 数据操作类型（INSERT/UPDATE/UPSERT）

## 📋 使用流程

### 1. 保存工作记录
1. 完成Excel文件上传
2. 完成字段映射配置
3. 点击"保存工作记录"按钮
4. 输入记录名称和描述信息
5. 确认保存

### 2. 管理工作记录
访问"工作记录"页面可以：
- 查看所有保存的工作记录
- 搜索特定的工作记录
- 查看记录详情（包括字段映射）
- 删除不需要的记录

### 3. 批量生成SQL
1. 在工作记录页面选择一个或多个记录
2. 选择处理模式：
   - **分离模式**：为每个记录生成独立的SQL
   - **合并模式**：将多个记录合并为一个SQL（要求操作同一张表）
3. 点击"生成SQL"按钮
4. 查看和复制生成的SQL语句

## 🔧 API 接口

### 工作记录相关接口
- `POST /api/save-work-record` - 保存工作记录
- `GET /api/get-work-records` - 获取工作记录列表
- `GET /api/get-work-record/:id` - 获取工作记录详情
- `DELETE /api/delete-work-record/:id` - 删除工作记录
- `POST /api/generate-sql-from-work-records` - 从工作记录生成SQL

## 💾 数据存储结构

工作记录包含以下信息：
```json
{
  "type": "work_record",
  "name": "记录名称",
  "description": "描述信息",
  "excelData": "Excel数据数组",
  "columns": "Excel列信息",
  "originalFileName": "原始文件名",
  "worksheet": "工作表名称",
  "mapping": "字段映射配置",
  "targetTable": "目标表名",
  "operationType": "操作类型",
  "dbConfig": "数据库配置",
  "recordCount": "记录数量",
  "createdAt": "创建时间",
  "updatedAt": "更新时间"
}
```

## 🚀 使用场景

1. **重复性数据导入**：保存配置后可重复使用相同的映射规则
2. **批量数据处理**：选择多个记录一次性生成SQL
3. **工作记录管理**：跟踪和管理所有的数据转换工作
4. **团队协作**：共享工作记录配置

## 🔍 页面导航

- **数据库配置** → **Excel上传** → **字段映射** → **保存工作记录**
- 任何时候都可以访问"工作记录"页面查看和管理已保存的记录

## 💡 使用技巧

1. 使用描述性的记录名称，便于后续查找
2. 合并模式要求所有记录操作同一张表且操作类型相同
3. 工作记录会保存完整的字段映射，包括转换规则和默认值
4. 可以通过搜索功能快速找到特定的工作记录